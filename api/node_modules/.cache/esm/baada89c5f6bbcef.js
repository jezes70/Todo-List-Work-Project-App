let AuthenticationError,compareUserIds;_5f6‍.x([["default",()=>_5f6‍.o]]);_5f6‍.w("apollo-server",[["AuthenticationError",["AuthenticationError"],function(v){AuthenticationError=v}]]);_5f6‍.w("../../utils",[["compareUserIds",["compareUserIds"],function(v){compareUserIds=v}]]);


_5f6‍.d({
  addProject: async (_, args, ctx) => {
    if (!ctx.user) {
      throw new AuthenticationError("You are not logged in.");
    }

    return ctx.models.Project.create({
      name: args.input.name,
      color: args.input.color,
      user: ctx.user.id,
    });
  },
  updateProject: async (_, args, ctx) => {
    if (!ctx.user) {
      throw new AuthenticationError("You are not logged in.");
    }

    const Project = await ctx.models.Project.findOne({ _id: args.id });

    if (!Project) {
      throw new Error("Project not found.");
    }

    compareUserIds(Project.user, ctx.user.id);

    await ctx.models.Project.updateOne({ _id: Project.id }, args.input);

    return ctx.models.Project.findOne({ _id: Project.id });
  },
  removeProject: async (_, { id }, ctx) => {
    if (!ctx.user) {
      throw new AuthenticationError("You are not logged in.");
    }

    const Project = await ctx.models.Project.findOne({ _id: id });

    if (!Project) {
      throw new Error("Project not found.");
    }

    compareUserIds(Project.user, ctx.user.id);

    await ctx.models.Project.deleteOne({ _id: Project.id });

    return Project;
  },
});
